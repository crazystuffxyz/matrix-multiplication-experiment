const n0=parseInt(process.argv[2]);function memMB(){return process.memoryUsage().heapUsed/1024/1024}function zeros(e){return Array.from({length:e},(()=>Array(e).fill(0)))}function add(e,t){const n=e.length,r=zeros(n);for(let s=0;s<n;s++)for(let a=0;a<n;a++)r[s][a]=e[s][a]+t[s][a];return r}function sub(e,t){const n=e.length,r=zeros(n);for(let s=0;s<n;s++)for(let a=0;a<n;a++)r[s][a]=e[s][a]-t[s][a];return r}function naive(e,t){const n=e.length,r=zeros(n);for(let s=0;s<n;s++)for(let a=0;a<n;a++)for(let o=0;o<n;o++)r[s][o]+=e[s][a]*t[a][o];return r}function split(e){const t=e.length/2;return[e.slice(0,t).map((e=>e.slice(0,t))),e.slice(0,t).map((e=>e.slice(t))),e.slice(t).map((e=>e.slice(0,t))),e.slice(t).map((e=>e.slice(t)))]}function join(e,t,n,r){return[...e.map(((e,n)=>e.concat(t[n]))),...n.map(((e,t)=>e.concat(r[t])))]}function strassen(e,t){if(e.length<=64)return naive(e,t);const[n,r,s,a]=split(e),[o,i,l,c]=split(t),d=strassen(add(n,a),add(o,c)),m=strassen(add(s,a),o),u=strassen(n,sub(i,c)),p=strassen(a,sub(l,o)),g=strassen(add(n,r),c),f=strassen(sub(s,n),add(o,i)),h=strassen(sub(r,a),add(l,c));return join(add(sub(add(d,p),g),h),add(u,g),add(m,p),add(sub(add(d,u),m),f))}function pad(e,t){const n=zeros(t);for(let t=0;t<e.length;t++)for(let r=0;r<e.length;r++)n[t][r]=e[t][r];return n}function randMat(e){return Array.from({length:e},(()=>Array.from({length:e},(()=>Math.random()))))}const pow2=1<<Math.ceil(Math.log2(n0)),A0=randMat(n0),B0=randMat(n0),A=pad(A0,pow2),B=pad(B0,pow2);global.gc&&global.gc();let peak=0,t0=process.hrtime.bigint();naive(A0,B0),peak=Math.max(peak,memMB());let t1=process.hrtime.bigint();console.log(`Naive Algorithm Time: ${(Number(t1-t0)/1e9).toFixed(6)}`),t0=process.hrtime.bigint(),strassen(A,B),peak=Math.max(peak,memMB()),t1=process.hrtime.bigint(),console.log(`Strassen Algorithm Time: ${(Number(t1-t0)/1e9).toFixed(6)}`),console.log(`Peak RAM (MB): ${peak.toFixed(2)}`);